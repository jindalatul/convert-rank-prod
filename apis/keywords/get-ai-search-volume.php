<?php
ini_set('memory_limit', '-1');
ini_set("display_errors","On");
require_once("main-api.php");

/*
$body = getInput();
$keywords = $body['keywords'] ?? null;

if (!is_array($keywords) || !count($keywords)) throw new Exception("Provide 'keywords' as a non-empty array.");
//var_dump($keywords); die();
*/
/*
$keywords = [
    "solar panel installation quote",
    "quote for solar panel installation",
    "solar panel installation quotation",
    "solar panel installation quotes",
    "solar installation virginia",
    "solar power installation quote",
    "commercial solar installation",
    "solar installation in massachusetts",
    "commercial solar installation companies",
    "commercial solar installation company",
    "solar installation on roof",
    "solar panel installation portland",
    "best solar installation",
    "solar panel installation california",
    "massachusetts solar panel installation",
    "solar panel installation in massachusetts",
    "solar installation massachusetts",
    "massachusetts solar installation",
    "solar panel installation massachusetts",
    "solar installation maryland",
    "maryland solar installation",
    "solar roof installation",
    "roof solar installation",
    "solar roofing installation",
    "roofing and solar installation",
    "roof and solar installation",
    "solar rooftop installation",
    "commercial-solar-panel-installation",
    "commercial solar power installation",
    "commercial solar panel installation",
    "solar installation colorado",
    "solar installation san diego ca",
    "solar installation las vegas",
    "solar panel installation in maryland",
    "solar panel installation maryland",
    "solar installation san antonio",
    "solar panel installation florida",
    "north carolina solar installation",
    "solar installation nc",
    "solar panel installation contractors",
    "solar panel installation contractor",
    "solar panel installation company near me",
    "solar installation orlando fl",
    "las vegas solar installation",
    "solar panels installation nyc",
    "solar panel installation new york city",
    "solar panel installation new york",
    "solar installation in nj",
    "solar installation new jersey",
    "solar installation nj",
    "professional solar panel installation",
    "commercial solar panels installation",
    "solar panel commercial installation",
    "solar installation in california",
    "nj solar panel installation",
    "solar panel installation new jersey",
    "solar installation orlando",
    "solar panel installation services",
    "solar panels installation service",
    "solar batteries installation",
    "solar installation san diego",
    "solar installation warranty",
    "solar panel installation nj",
    "residential solar panel installation",
    "solar panel installation residential",
    "installation of solar system",
    "solar installation system",
    "solar systems installation",
    "solar power system installation",
    "installation solar power system",
    "solar installation residential",
    "solar residential installation",
    "maryland solar panel installation",
    "solar installation ct",
    "solar installation pennsylvania",
    "solar installation pa",
    "tesla solar panel installation",
    "tesla solar installation",
    "installation of solar panels at home",
    "solar panel installation for home",
    "home solar panel installation",
    "solar panels installation for home",
    "loans for solar installation",
    "solar installation loans",
    "solar installation loan",
    "loan for solar installation",
    "installation solar panel system",
    "installation of solar power system",
    "solar panel system installation",
    "solar system installation",
    "solar installation systems",
    "solar installation houston",
    "houston solar installation",
    "solar installation illinois",
    "illinois solar installation",
    "solar battery installation",
    "solar installation los angeles ca",
    "los angeles solar installation",
    "solar energy installation for home",
    "solar power home installation",
    "home solar system installation",
    "solar panel installation home",
    "solar panels for home installation",
    "installation of solar panel at home",
    "solar panel for home installation",
    "home solar panels installation",
    "solar panel installation for homes",
    "home installation of solar panels",
    "solar installation in illinois",
    "solar roof panel installation",
    "installation of solar panels on roof",
    "solar panel installation roof",
    "solar panel installation on roof",
    "roof and solar panel installation",
    "installation of solar panel on roof",
    "roof installation of solar panels",
    "solar panel rooftop installation",
    "solar installation maine",
    "solar installation utah",
    "solar installation companies in california",
    "solar installation california",
    "solar panel installation companies near me",
    "solar installation new york",
    "solar panel installation on rooftop",
    "roof solar panels installation",
    "installation of rooftop solar panels",
    "roof solar panel installation",
    "solar panels roof installation",
    "solar panels installation on roof",
    "solar panel roof installation",
    "solar installation for house",
    "solar rooftop installation cost",
    "cost of solar roof installation",
    "rooftop solar installation cost",
    "solar roof installation cost",
    "solar powered attic fan installation",
    "attic solar fan installation",
    "solar attic fan installation",
    "solar power cost of installation",
    "solar installation costs",
    "solar power installation costs",
    "solar installation cost calculator",
    "solar panel installation cost calculator",
    "estimate solar installation cost",
    "cost of solar installation calculator",
    "solar roofing installation cost",
    "solar installation rebates",
    "solar installation rebate",
    "solar panel installation service",
    "tax credit for solar installation",
    "tax credits for solar installation",
    "solar panel installation rebate",
    "cost for solar installation",
    "cost of solar power installation",
    "solar cost installation",
    "solar installation cost",
    "cost of solar installation",
    "solar power installation cost",
    "solar panel installation tax credit",
    "solar installation for home cost",
    "cost of home solar installation",
    "solar installation cost california",
    "tesla solar panels installation",
    "home solar installation cost",
    "solar water heater installation",
    "solar water heaters installation",
    "solar energy installation",
    "nyc solar panel installation",
    "solar panel installation nyc",
    "solar panel installation in new york",
    "solar panel installation ny",
    "solar installation nyc",
    "solar installation new york city",
    "florida solar panel installation",
    "solar installation grants",
    "how much is solar installation",
    "how much for solar panel installation",
    "how much is solar panel installation",
    "how much are solar panels and installation",
    "how much is solar panel installation cost",
    "how much for solar panels installation",
    "how much is a solar panel installation",
    "how much is solar power installation",
    "solar installation house",
    "solar panels installation los angeles",
    "solar panel installation los angeles",
    "virginia solar panel installation",
    "residential solar panels installation",
    "solar panel residential installation",
    "average cost of solar installation",
    "average installation cost of solar panels",
    "average cost of solar panel installation",
    "average installation cost for solar panels",
    "solar panel installation average cost",
    "average cost solar panel installation",
    "how much does solar panel installation cost",
    "how much do solar panel installation cost",
    "how much does solar panels installation cost",
    "how much does installation of solar panels cost",
    "how much does solar power installation cost",
    "solar installation indiana",
    "residential solar power installation",
    "residential solar installation",
    "solar panel system installation cost",
    "flat roof solar installation",
    "how much does it cost for solar panel installation",
    "how much does a solar panel installation cost",
    "average cost of solar panels and installation",
    "average cost of installation of solar panels",
    "typical solar panel installation cost",
    "solar panel installation virginia",
    "how much should solar panel installation cost",
    "how much does the installation of solar panels cost",
    "arizona solar panel installation",
    "solar panel installation arizona",
    "how much does a solar installation cost",
    "pool solar heater installation",
    "solar pool heating installation",
    "solar pool heater installation",
    "pool solar heating installation",
    "solar installation wiring diagram",
    "solar battery installation cost",
    "solar installation training",
    "installation of solar panels training",
    "solar panels installation training",
    "solar energy installation training",
    "solar panel installation angle calculator",
    "solar installation los angeles",
    "solar panel installation in los angeles",
    "los angeles solar panel installation",
    "solar panel installation cost per watt",
    "solar installation cost per watt",
    "cost of solar installation per watt",
    "solar installation job",
    "solar panel installation permit",
    "solar panel installation permits",
    "solar panel installation how to",
    "solar installation how to",
    "solar panel installation training",
    "solar power installation training",
    "how solar panel installation",
    "solar panel installation in texas",
    "texas solar panel installation",
    "solar panel installation texas",
    "ring solar panel installation",
    "solar panel installation for rv",
    "camper solar panel installation",
    "rv solar installation",
    "solar panel rv installation",
    "rv solar panels installation",
    "rv solar panel installation",
    "solar installation jobs near me",
    "off-grid solar installation",
    "off grid solar installation",
    "solar system installation jobs",
    "career in solar panel installation",
    "solar panel installation jobs",
    "solar panel installation careers",
    "solar panels installation jobs",
    "solar energy installation jobs",
    "solar panel installation job",
    "home solar installation kit",
    "solar panel installation career",
    "jobs in solar panel installation",
    "job for solar panel installation",
    "solar panels diy installation",
    "solar panels installation diy",
    "do it yourself solar installation",
    "solar diy installation",
    "diy solar panel installation",
    "rv solar installation near me",
    "diy solar installation kits",
    "solar water heater installation cost",
    "solar hot water heater installation cost",
    "solar hot water installation cost",
    "diy installation of solar panels",
    "do it yourself solar panel installation",
    "diy solar panels installation",
    "solar panel diy installation",
    "solar panel installation diy",
    "diy solar installation",
    "solar panels rv installation",
    "solar panel installation rv",
    "rv solar power installation",
    "solar panels for rv installation",
    "solar panel installation salary",
    "solar panel installation jobs pay",
    "solar panel battery installation",
    "carport solar installation",
    "solar pv system installation",
    "solar pv installation",
    "solar installation images",
    "solar installation pictures",
    "solar installation jobs",
    "solar panel installation brackets",
    "van solar installation",
    "solar installation pay",
    "solar installation salary",
    "solar installation components",
    "solar panel installation incentives"
];
  $buffer = getAI_SearchVolume_for_Keywords($keywords);
  sendResponseJSON($buffer);

  <br />
<b>Warning</b>: Trying to access array offset on value of type null in
<b>/var/www/html/convert-rank/apis/keywords/get-ai-search-volume.php</b> on line <b>336</b><br />
<br />
<b>Warning</b>: Trying to access array offset on value of type null in
<b>/var/www/html/convert-rank/apis/keywords/get-ai-search-volume.php</b> on line <b>336</b><br />
<br />
<b>Fatal error</b>: Uncaught TypeError: count(): Argument #1 ($value) must be of type Countable|array, null given in
/var/www/html/convert-rank/apis/keywords/get-ai-search-volume.php:338
Stack trace:
#0 /var/www/html/convert-rank/apis/keywords/get-keywords-v2.php(582): getAI_SearchVolume_for_Keywords(Array)
#1 {main}
thrown in <b>/var/www/html/convert-rank/apis/keywords/get-ai-search-volume.php</b> on line <b>338</b><br />
*/
function getAI_SearchVolume_for_Keywords($input_keywords)
{

        if (!is_array($input_keywords) || count($input_keywords) <= 0) {
            return [];
        }
        
        //var_dump($input_keywords); die();

        $post_array = array();
        $api_path = "/v3/ai_optimization/ai_keyword_data/keywords_search_volume/live";

        $post_array[] = array(
        "keywords" => $input_keywords,
        "language_name" => "English",
        "location_code" => 2840,
        );

        $result = callDataForSEO($api_path,$post_array);
        $keywords = @$result["tasks"][0]["result"][0]["items"];
        
        if (!is_array($keywords) || count($keywords) <= 0) {
            return [];
        }

        //var_dump($keywords); die();

        foreach($keywords as $kw) 
        {
            if (!is_array($kw) || empty($kw['keyword'])) {
                  continue;
            }

            $buffer[] =array(
                'keyword'=> $kw["keyword"], 
                'ai_search_volume' => $kw["ai_search_volume"], 
                //'ai_monthly_searches'=> $k["ai_monthly_searches"],
            );
        }
        return $buffer;
}
?>